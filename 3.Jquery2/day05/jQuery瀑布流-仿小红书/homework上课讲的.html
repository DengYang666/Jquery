<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        img{
            vertical-align: bottom;
        }
        .fl{
            float: left;
        }
        .fr{
            float: right;
        }
        .clearfix::after{
            content:"";
            display: block;
            clear:both;
        }

        .box{
            width: 1180px;
            margin:100px auto;
            position: relative;
        }
        .box .item{
            width: 220px;
            box-shadow: 0 1px 2px 0 rgba(0,0,0,.1);
            border-radius: 10px;
            overflow: hidden;
            /* æˆ‘ä»¬å‘ç°æµ®åŠ¨å®ç°ä¸äº†,æ‰€ä»¥æˆ‘ä»¬é€‰ç”¨å®šä½,å¹¶é€šè¿‡jQueryè®¾ç½®ç›¸åº”çš„åæ ‡å€¼å®ç° */
            /* position: relative; */
            position: absolute;
            left: 0;
            top: 0;
        }
        .box .item .item_img img{
            width: 100%;
        }
        .box .item .item_desc{
            margin-top: 20px;
            margin-bottom: 14px;
            margin-left: 16px;
            margin-right: 17px;
        }
        .box .item .item_user{
            height: 30px;
            margin-left: 15px;
            margin-right: 17px;
            margin-bottom: 10px;
            line-height: 30px;
            color:#73716c;
            font-size:12px;
        }
        .box .item .item_user .user_left img{
            width: 30px;
            height: 30px;
            margin-right: 11px;
            border-radius: 50%;
        }
        .box .item .item_user .user_right img{
            width: 20px;
            height: 18px;
            vertical-align: -4px;
        }
        .box .item .mask{
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background:rgba(0,2,4,.2);
            display: none;
            cursor: pointer;
        }
        /* é¼ æ ‡ç§»ä¸Š.box .itemä»¥å, .maskå±‚å¯¹åº”çš„æ ·å¼ */
        .box .item:hover .mask{
            display: block;
        }
    </style>
</head>
<body>
    <div class="box">
        <!-- .itemä»£è¡¨æ¯ä¸€é¡¹ -->
        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/01.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">æ‹¥æœ‰ä¸€å°å®¾åˆ©GTï¼Œå¦‚ä½•æ‹ï¼Œæ‰ä¸ä¼šè¢«è¯´ç‚«å¯Œï¼Ÿ</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/01.jpg"/>
                    <span>é‡‘è‹±ç„•</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>102</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/02.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">ğŸ›æ¸…å‡‰ä¸€å¤ï¼Œå®å®ç”¨çš„è¿™äº›ä¸œè¥¿ä½ ğŸ‰çŸ¥é“â€¦</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/02.jpg"/>
                    <span>æˆ‘æ˜¯ç‰›æ²¹æœå‘€å‘€</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>112</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/03.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">è¿™äº›è¶…ç«çš„åŠ¨æ¼«å°è¯ä½ ç»å¯¹éƒ½æœ‰å¬è¿‡</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/03.jpg"/>
                    <span>å­¦è¯´æ—¥è¯­</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>305</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/04.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">é«˜æ®µä½çš„ç§‘å­¦è‚²å„¿ç†å¿µï¼åŸæ¥æ˜¯å®ƒï½</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/04.jpg"/>
                    <span>å°è¿·å§å„¿æ˜¯è±†è±†é¾™</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>101</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/05.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">æ²¡æƒ³åˆ°å› ä¸ºå©´å„¿æ¨è½¦ï¼Œæˆ‘å±…ç„¶è¢«å­©å­çˆ¸å¤¸äº†â€¦</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/05.jpg"/>
                    <span>æˆ‘æ˜¯ç‰›æ²¹æœå‘€å‘€</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>164</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/06.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">æ—¥å¸¸vlogï½œå¦ˆå¦ˆã€åšä¸»ï¼Œæ¯å¤©èº«ä»½è½¬æ¢</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/06.jpg"/>
                    <span>æœ¨å¤•_æœ¨</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>976</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/07.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">è¿™ä¸ªé£Ÿè°±æ‘†æ‘Šèƒ½ä¸èƒ½èµšåˆ°å­¦è´¹å¤§å®¶å¸®å¿™å‚è€ƒä¸€ä¸‹ğŸ˜‚</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/07.jpg"/>
                    <span>å½­é›¨è·baby</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>1373</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/08.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">å’Œæ²¹æ±¡èŸ‘è‚say byebyeï½œå¨æˆ¿æ¸…æ´å¥½ç‰©åˆ†äº«</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/08.jpg"/>
                    <span>Cikoe</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>60</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/09.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">ä¸Šè¡—è¶…æƒ¹çœ¼å®å…‰MINI EVï¼Œå¸‚åŒºä»£æ­¥è½¦æ€§ä»·é«˜</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/09.jpg"/>
                    <span>ä¸€é¢—å°ç”œæ¬£</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>80</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/10.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">ğŸ“¢å¿«å¼€å­¦äº†ï¼ï¼ï¼å†ä¸å‡†å¤‡å°±æ™šäº†âœ…</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/10.jpg"/>
                    <span>æˆ‘å«å°è±†æµ†</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>261</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>

        <div class="item">
            <!-- ä¸Šéƒ¨åˆ†å¤§å›¾ç‰‡ -->
            <div class="item_img">
                <img src="images/pic/11.jpg"/>
            </div>

            <!-- æè¿° -->
            <div class="item_desc">è†ç”°æ¢åº—ï½œæ—¶é›¾ç¾æœ¯é¦†</div>

            <!-- ç”¨æˆ·ç›¸å…³ä¿¡æ¯ -->
            <div class="item_user clearfix">
                <div class="user_left fl">
                    <img src="images/touxiang/11.jpg"/>
                    <span>iamlittley</span>
                </div>

                <div class="user_right fr">
                    <img src="images/heart.png"/>
                    <span>43</span>
                </div>
            
            </div>

            <!-- é®ç½©å±‚ -->
            <div class="mask"></div>

        </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script>
        // å…¥å£å‡½æ•°
        $(function(){
            // .boxç›’å­çš„å®½åº¦
            var boxWidth = $(".box").width();
            // .itemç›’å­çš„å®½åº¦
            var itemWidth = $(".item").width();
            // æœ€å¤§åˆ—æ•°
            var maxColumn = Math.floor( boxWidth/itemWidth );
            // .itemä¹‹é—´çš„é—´è·
            var gap = 18;
            // å®šä¹‰ä¸€ä¸ªæ•°ç»„,ä¿å­˜æ¯åˆ—æ€»é«˜åº¦
            var arrHeight = [];

            // å®ç°æ€è·¯:
            // 1. å…ˆæ‘†ç¬¬ä¸€è¡Œçš„.item ä¹Ÿå°±æ˜¯å‰5ä¸ª  
            // 2. ç¬¬äºŒè¡Œå¼€å§‹,æ¯ä¸ª.itemè¦æ”¾åœ¨å½“å‰æ‰€æœ‰åˆ—é«˜åº¦ä¸­æœ€å°çš„é‚£ä¸ªåˆ—ä¸‹é¢
            $(".item").each(function(index,domElement){
                if( index < maxColumn ){// ç¬¬ä¸€è¡Œ
                    $(domElement).css({
                        top: 0,
                        left: (itemWidth+gap)*index
                    })
                    // ä¿å­˜é«˜åº¦
                    arrHeight.push( $(domElement).height() );
                }else{// å…¶ä»–è¡Œ
                    // æ±‚å‡ºå½“å‰æ•°ç»„ä¸­çš„æœ€å°å€¼ä»¥åŠä¸‹æ ‡
                    var res = getArrMin( arrHeight );
                    var minValue = res.value;
                    var minIndex = res.index;
                    
                    $(domElement).css({
                        top: minValue+gap,
                        left: (itemWidth+gap)*minIndex
                    });

                    // æ›´æ–°æ•°ç»„
                    arrHeight[minIndex] = minValue+gap+$(domElement).height();
                }
            });


            // å°è£…ä¸€ä¸ªè·å–æ•°ç»„ä¸­æœ€å°å€¼å’Œæœ€å°å€¼æ‰€åœ¨çš„ä¸‹æ ‡çš„å‡½æ•°,è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡
            function getArrMin( myArr ){
                var minObj = {};
                minObj.index = 0;
                minObj.value = myArr[0];

                for(var i = 1; i < myArr.length; i++){
                    if( minObj.value > myArr[i] ){
                        minObj.value = myArr[i];
                        minObj.index = i;
                    }
                }

                return minObj;
            }
        })
    </script>
</body>
</html>